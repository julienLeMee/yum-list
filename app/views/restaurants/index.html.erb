<main class="py-10 lg:pl-72">
  <div class="px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 my-20">
      <% categories = [] %>
      <% @restaurants.each do |restaurant| %>
        <% unless categories.include?(restaurant.category) %>
          <% categories << restaurant.category %>
          <a href="#<%= restaurant.category.parameterize %>" class="p-6 border-2 border-white hover:bg-white text-white hover:text-gray-900 rounded-xl">
            <h2 class="text-xl font-semibold">
              <%= restaurant.category %>
            </h2>
          </a>
        <% end %>
      <% end %>
    </div>
    <!-- Your content -->
    <% if @restaurants.present? %>
      <% @restaurants.group_by(&:category).each do |category, restaurants| %>
        <h2 class="pt-4 text-xl font-semibold text-white" id="<%= category.parameterize %>">
          <%= category %>
        </h2>
        <ul role="list" class="">
          <div class="flex flex-col gap-2 my-6 overflow-hidden">
            <% restaurants.each do |restaurant| %>
              <li>
                <a href="<%= restaurant_path(restaurant) %>" class="relative block hover:bg-gray-50 bg-white shadow-sm ring-1 ring-gray-900/5 rounded-xl">
                  <% if restaurant.tested? %>
                    <div class="bg-green-500 w-2 h-2 rounded-full absolute top-2 right-2"></div>
                  <% end %>
                  <!-- Restaurant details here -->
                  <div class="relative flex justify-between gap-x-6 px-4 py-5 sm:px-6">
                    <div class="flex min-w-0 gap-x-4">
                      <img class="h-12 w-12 flex-none rounded-full bg-gray-50" src="https://images.unsplash.com/photo-1623341214825-9f4f963727da?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2940&q=80" alt="">
                      <div class="min-w-0 flex-auto">
                        <p class="text-sm font-semibold leading-6 text-gray-900">
                          <%= restaurant.name %>
                        </p>
                        <p class="mt-1 flex text-xs leading-5 text-gray-500">
                          <%= restaurant.address %>
                        </p>
                      </div>
                    </div>
                    <div class="flex shrink-0 items-center gap-x-4">
                      <div class="hidden sm:flex sm:flex-col sm:items-end">
                        <p class="text-sm leading-6 text-indigo-600"><%= restaurant.category %></p>
                        <p class="text-sm leading-6 text-gray-500"><%= "â˜…" * restaurant.rating.to_i %></p>
                      </div>
                      <svg class="h-5 w-5 flex-none text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
                      </svg>
                    </div>
                  </div>
                </a>
              </li>
            <% end %>
          </div>
        </ul>
      <% end %>
      <% else %>
      <p class="text-white">Aucun restaurant dans ma liste</p>
    <% end %>

  </div>
</main>
