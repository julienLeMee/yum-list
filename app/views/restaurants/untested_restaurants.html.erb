<main class="pt-16 pb-28 lg:pl-72">
  <div class="px-4 sm:px-6 lg:px-8">
    <div class="gap-2 my-4 overflow-x-auto w-full grid grid-flow-col auto-cols-max hide-scrollbar">
      <% categories = [] %>
      <% @restaurants.each do |restaurant| %>
        <% unless categories.include?(restaurant.category) %>
          <% categories << restaurant.category %>
          <a href="#<%= restaurant.category.parameterize %>" class="w-fit h-fit flex items-center justify-center py-1.5 px-3 bg-white text-gray-700 hover:bg-gray-200 rounded-full transition duration-200 ease-in-out text-[13px] font-medium">
            <%= restaurant.category %>
          </a>
        <% end %>
      <% end %>
    </div>
    <!-- Your content -->
    <% if @restaurants.present? %>
      <% @restaurants.group_by(&:category).each do |category, restaurants| %>
        <div id="<%= category.parameterize %>" class="flex items-center justify-between mt-6 mb-1">
          <p class="text-[--color--text--primary] font-medium">
            <%= category %>
          </p>
        </div>
        <!-- Grid colonnes qui scroll horizontalement ensemble style Apple Podcasts - max 3 restaurants par colonne -->
        <div class="overflow-x-auto -mx-4 sm:-mx-6 lg:-mx-8 px-4 sm:px-6 lg:px-8 mb-6">
          <div class="flex gap-3 hide-scrollbar pb-2" style="scroll-snap-type: x mandatory;">
            <% restaurants.each_slice(3).each do |column_restaurants| %>
              <div class="flex flex-col flex-shrink-0 w-[85vw] sm:w-[75vw] lg:w-[60vw] gap-3" style="scroll-snap-align: start;">
                <% column_restaurants.each do |restaurant| %>
                  <%= render 'restaurants/restaurant_card', restaurant: restaurant %>
                <% end %>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
      <% else %>
      <p class="text-[--color--text--primary] text-center">Aucun restaurant dans ma liste !</p>
      <%= link_to new_restaurant_path, class: "text-center text-gray-400 hover:text-white hover:bg-gray-800 group flex justify-center rounded-md p-2 text-sm leading-6 font-semibold" do %>
        <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="none" stroke-width="1" viewBox="0 0 24 24" color="currentColor">
          <path stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" d="M6 12h6m6 0h-6m0 0V6m0 6v6"></path>
        </svg>
        Ajouter mon premier restaurant
      <% end %>
    <% end %>

  </div>
</main>
